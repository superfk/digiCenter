import React, { Component } from 'react';
import PropTypes from "prop-types";

class ColorPicker extends Component {
    state = {
        expanded: false
    }

    onClickHandler = () => {
        this.setState({ expanded: !this.state.expanded });
    }

    collapse = () => {
        this.setState({ expanded: false });
    }

    preventBlure = e => {
        e.preventDefault();
    }

    setColor = color => () => {
        this.props.modify('foreColor', color)();
    }

    render() {
        const { disabled, colors } = this.props;

        return (
            <li tabIndex="0" onBlur={this.collapse}>
                <button disabled={disabled} onClick={this.onClickHandler} className='mdb-wysiwyg-list-button'>
                    <i className="fas fa-font" />
                    <i className="fas fa-chevron-down fa-sm pl-2" />
                </button>
                {
                    this.state.expanded && (
                        <ul className="mdb-wysiwyg-list mdb-wysiwyg-toolbar-color-palette" onMouseDown={this.preventBlure}>
                            {colors.map(color => {
                                return (
                                    <li key={color}>
                                        <button onClick={this.setColor(color)} style={{ backgroundColor: color }} />
                                    </li>
                                )
                            })
                            }
                        </ul>
                    )
                }
            </li>
        );
    }
}


ColorPicker.propTypes = {
    disabled: PropTypes.bool.isRequired,
    colors: PropTypes.arrayOf(PropTypes.string).isRequired
}


export default ColorPicker;